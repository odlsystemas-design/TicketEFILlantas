<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=60mm, initial-scale=1.0">
    <title>Ticket de Compra</title>
    <style>
        body {
            font-family: tahoma, Helvetica, sans-serif;
            margin: 0;
            font-size: 3mm;
            text-align: center; 
        }

        #thermal-pos {
            margin: 0 auto;
            max-width: 60mm;
        }
        
        .logo-container {
            text-align: left;
        }

        /* --- ESTILO MODIFICADO --- */
        .ticket-logo {
            max-width: 60mm;
            height: auto;
            display: block; /* Elimina el espacio inferior de la imagen */
        }

        .label {
            margin: 0;
            margin-left: 0.5mm;
        }

        /* --- ESTILO MODIFICADO --- */
        .info-tienda {
            margin: 0;
            padding-top: 0; /* Asegura que no haya espacio superior */
        }

        .table {
            border-collapse: collapse;
            border-spacing: 0;
            width: 100%;
        }

        .table-header h2 {
            margin: 0;
            padding-left: 0.5mm;
        }

        .table-footer.top-line td,
        .table-footer {
            margin-left: 0.5mm;
        }

        .table-footer h2,
        .table-footer h4 {
            margin: 0;
            padding: 1mm 0;
        }

        .saldo-text {
            margin: 0;
            margin-left: 0.1mm;
        }

        .policy {
            margin-left: 0.5mm;
        }

        .table-footer td {
            padding: 0;
            line-height: 1;
        }

        .nro_boleta,
        .nro_mesa,
        .fecha_recepcion,
        .m-0,
        .direccion {
            margin: 0;
        }
    </style>
</head>
<body onload="window.print()" onfocus="window.close()">

    <div id="thermal-pos">
        
        <div class="logo-container">
            <img class="ticket-logo" src="https://acortar.link/F1n0fS" alt="EFI Llantas">
        </div>

        <div class="label">
            <p class="info-tienda">
                Nit: <br>
                EFI LLANTAS / Blvd Enrique Felix Castro Infonavit Humaya
            </p>
        </div>
        
        <div class="label">
            <b>TICKET:</b>
            <h1 class="nro_boleta" id="nro_boleta_id"></h1>
            <h1 class="nro_mesa" id="nro_mesa_id"></h1>
            <h3 class="direccion" id="nro_direccion_id"></h3>
        </div>
        <div class="label">
            <p class="fecha_recepcion">
                FECHA DE RECEPCION:
                <br>
                <b id="fechaR"></b>
                <b span id="hora"></b>
            </p>
        </div>

        <table class="table">
            <tbody id="tablaBody">
                <tr class="table-header">
                    <th><h2>Cant</h2></th>
                    <th><h2>Descripcion</h2></th>
                    <th><h2>Total</h2></th>
                </tr>
            </tbody>
        </table>

        <table class="table">
          <tbody id="tablaFooter">
                <tr class="table-footer">
                    <td colspan="2"><h2>EFECTIVO:</h2></td>
                    <td colspan="2"><h2 id="efectivo"></h2></td>
                </tr>
                <tr class="table-footer top-line">
                    <td colspan="2"><h2>TOTAL:</h2></td>
                    <td colspan="2"><h2 id="total"></h2></td>
                </tr>
                <tr class="table-footer">
                    <td colspan="2"><h2>CAMBIO:</h2></td>
                    <td colspan="2"><h2 id="devueltas"></h2></td>
                </tr>
          </tbody>
        </table>

        <br/>
        <p class="saldo-text">
            <b><span class="estado-deuda" id="estado"></span></b>
        </p>
        <div class="policy">
            <p class="policy-title">
                <b>IMPORTANTE:</b>
            </p>
            <p class="m-0">
                Para facturar mandar ticket al correo odlsystemas@gmail.com
                <br/>
                Contactos: +52 667 585 5083
                <br/>
                Siguenos en redes sociales como @EFILlantas
            </p>
        </div>
    </div>

    <script>
        // --- Tu JavaScript sigue igual ---
        const params = new URLSearchParams(window.location.search);
        var nro_boleta = params.has('boleta') ? params.get('boleta') : "---";
        var nro_mesa = params.has('mesa') ? params.get('mesa') : "---";
        var direc = params.has('direccion') ? params.get('direccion') : "---";
        var fecha = params.has('fecha') ? params.get('fecha') : "dd/mm/aaaa hh:mm:ss";
        var fecha_entrega = params.has('fecha_entrega') ? params.get('fecha_entrega') : "hh:mm:ss";
        var domi = params.has('domi') ? params.get('domi') : "N/A";
        var propina = params.has('propina') ? params.get('propina') : "N/A";
        var total = params.has('total') ? params.get('total') : "";
        var subtotal_desc = params.has('subtotal_desc') ? params.get('subtotal_desc') : " ";
        var descuento = params.has('descuento') ? params.get('descuento') : " ";
        var estado = params.has('estado') ? params.get('estado') : "--";
        var cantidades = params.has('cantidades') ? params.get('cantidades') : "0";
        var descripciones = params.has('servicios') ? params.get('servicios') : "No hay articulos";
        var p_units = params.has('p_unit') ? params.get('p_unit') : "0.00";
        propina = parseFloat(propina).toLocaleString('es-ES', { minimumFractionDigits: 0 });
        domi = parseFloat(domi).toLocaleString('es-ES', { minimumFractionDigits: 0 });
        total = parseFloat(total).toLocaleString('es-ES', { minimumFractionDigits: 0 });
        descuento = parseFloat(descuento).toLocaleString('es-ES', { minimumFractionDigits: 0 });
        subtotal_desc = parseFloat(subtotal_desc).toLocaleString('es-ES', { minimumFractionDigits: 0 });
        cantidades = cantidades.split(",");
        descripciones = descripciones.split(",");
        p_units = p_units.split(",");
        var result = [];
        cantidades.forEach(function(value, id) {
            result[id] = {
                cantidad: cantidades[id],
                descripcion: descripciones[id],
                precio_unit: parseFloat(p_units[id]).toLocaleString('es-ES', { minimumFractionDigits: 0 }),
            };
        });
        var tablaBody = document.getElementById("tablaBody");
        result.forEach(function(row) {
            var newRow = document.createElement("tr");
            newRow.className = "table-item";
            newRow.innerHTML = `<td class="item">${row.cantidad}</td><td class="item">${row.descripcion}</td><td class="item">${row.precio_unit}</td>`;
            tablaBody.appendChild(newRow);
        });
        var spaceRow = document.createElement("tr");
        spaceRow.innerHTML = `<td colspan="3">&nbsp;</td>`;
        tablaBody.appendChild(spaceRow);
        document.getElementById("nro_boleta_id").textContent = nro_boleta;
        document.getElementById("nro_mesa_id").textContent = nro_mesa;
        document.getElementById("nro_direccion_id").textContent = direc;
        document.getElementById("fechaR").textContent = fecha;
        document.getElementById("hora").textContent = fecha_entrega;
        document.getElementById("total").textContent = total;
        document.getElementById("efectivo").textContent = descuento;
        document.getElementById("devueltas").textContent = subtotal_desc;
        document.getElementById("estado").textContent = estado;
    </script>
</body>
</html>


























